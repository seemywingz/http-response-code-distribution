#!/bin/bash

LOG=/var/log/nginx/access.log
if [ $# -gt 0 ]; then
  LOG=$1
fi

START=$(head -1 $LOG | cut -d ' ' -f4 | cut -c2-)
END=$(tail -n 1 $LOG | cut -d ' ' -f4 | cut -c2-)

if [ -e $LOG ];
then
 
  echo 
  echo "    Count  Response Code"
  
  cat $LOG |\
  cut -d '"' -f3 |\
  cut -d ' ' -f2 |\
  sort | uniq -c |\
  sed 's/.\{7\}/&       /g'

  echo
  echo "Start: $START"
  echo "  End: $END"
else
  echo
  echo "   !!!!  Invalid File !!!!"
  echo "   run with no arguments to parse"
  echo "   /var/log/nginx/access.log"
fi


